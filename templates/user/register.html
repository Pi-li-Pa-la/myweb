<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
</head>
<style>
    #u_txt {
        color: red;
    }
    #u_txt2 {
        color: blue;
    }
</style>
<body>
    <form action="/user/signup" method="post">
        <h5>用&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;户&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" placeholder="username" name="username" onblur="confirm_username(this.value)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用户名长度在6到32位之间，且只能由字母、数字构成</h5>
        <h5><span id="u_txt"></span></h5><h5><span id="u_txt2"></span></h5>
        <h5>密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="pwd" type="password" placeholder="password" name="password" onblur="confirm_password(this.value)">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;密码长度须在8到128位之间</h5>
        <h5>再次输入密码:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input id="pwd_ag" type="password" placeholder="password again" name="password_again" onblur="confirm_password(this.value)"></h5>
        <h5><span id="p_txt"></span></h5>
        <h5>注&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;册&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" placeholder="register code" name="register_code"></h5>
        <button>注册</button>
    </form>
</body>

<script type="text/javascript">

function confirm_username(username)
{
var xmlhttp;
var u_status = 0;

if ((username.length<=5 && username.length > 0 ) || (username.length >32))
  {
  document.getElementById("u_txt").innerHTML="用户名长度在6到32位之间";
  return;
  }
else
  {
  document.getElementById("u_txt").innerHTML="";

  xmlhttp=new XMLHttpRequest();
  xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("u_txt2").innerHTML="用户名可以使用";
    u_status = 1;
    }
  else if (xmlhttp.readuState==4 && xmlhttp.status==202)
    {
    document.getElementById("u_txt").innerHTML="用户名已被使用";
    };
  }
  xmlhttp.open("POST", '/user/confirm_username', true);
  xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
  xmlhttp.send("username="+username);
  }
}


function confirm_password(str)
{
var p_status = 0;

if ((str.length < 8) && (str.length > 0))
  {
  document.getElementById("p_txt").innerHTML="密码至少需要8位";
  }
else if (str.length > 128)
  {
  document.getElementById("p_txt").innerHTML="密码过长，请控制其小于128位";
  }
else
  {
  document.getElementById("p_txt").innerHTML="";

  pwd = document.getElementById("pwd").value
  pwd_ag = document.getElementById("pwd_ag").value

  if ((pwd = pwd_ag) && (pwd != ''))
    {
    p_status = 1;
    }
  }
}
</script>
</html>